(()=>{"use strict";const e=e=>{const t=document.createElement("div");t.style.cssText="font-size: 2rem",t.style.color="#fff",e.addEventListener("submit",(o=>{const l=e.querySelectorAll("input");let a=0;o.preventDefault(),e.appendChild(t);for(let e=0;e<3;e++)""!==l[e].value.trim()&&a++;if(3===a){t.textContent="Загрузка...";const o=new FormData(e);let a={};for(let e of o.entries())a[e[0]]=e[1];l.forEach((e=>{e.value=""})),(e=>fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(a).then((e=>{if(200!==e.status)throw new Error("Status network not 200");t.textContent="Спасибо! Мы скоро с вами свяжемся.",setTimeout((()=>{t.textContent="",document.querySelector(".popup").style.display="none"}),3e3)})).catch((e=>{console.error(e),t.textContent="Что-то пошло не так!",setTimeout((()=>{t.textContent="",document.querySelector(".popup").style.display="none"}),3e3)}))}}))};"loading"==document.readyState&&(e=>{let t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),l=document.getElementById("timer-seconds");const a=e=>(1===(e=String(e)).length&&(e="0"+e),e),c=()=>{let c=(()=>{let t=new Date(e).getTime(),o=(new Date).getTime(),l=(t-o)/1e3,a=Math.floor(l%60),c=Math.floor(l/60%60);return{hours:Math.floor(l/60/60),timeRemaining:l,minutes:c,seconds:a,dateNow:o,dateStop:t}})();if(!(c.dateStop<c.dateNow))return t.textContent=a(c.hours),o.textContent=a(c.minutes),l.textContent=a(c.seconds),c.timeRemaining;t.textContent="00",o.textContent="00",l.textContent="00"};c()>0&&setInterval(c,1e3)})("25 may 2021");const t=document.getElementById("form1"),o=document.getElementById("form2"),l=document.getElementById("form3");(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{let o=t.target;o.closest('menu>a[href*="#"')||o.closest('menu>ul>li>a[href*="#"')||o.closest("div>.menu")?e.classList.toggle("active-menu"):o.closest("menu")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.documentElement.clientWidth;e.style.opacity=0;let l,a=0;const c=()=>{a+=.02,e.style.display="block",l=requestAnimationFrame(c),a<=1?e.style.opacity=a:cancelAnimationFrame(l)};t.forEach((t=>{t.addEventListener("click",(()=>{o>768?(l=requestAnimationFrame(c),a=0):(e.style.display="block",e.style.opacity=1)}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector("menu>ul").querySelectorAll('a[href*="#"'),t=document.querySelector("main>a"),o=e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href");document.querySelector(""+o).scrollIntoView({behavior:"smooth",block:"start"})}))};e.forEach((e=>{o(e)})),o(t)})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".service-header-tab"),l&&t.forEach(((e,a)=>{e===l&&(e=>{for(let l=0;l<o.length;l++)e===l?(t[l].classList.add("active"),o[l].classList.remove("d-none")):(t[l].classList.remove("active"),o[l].classList.add("d-none"))})(a)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content");let l,a,c=0;const n=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},s=()=>{n(e,c,"portfolio-item-active"),n(a,c,"dot-active"),c++,c>=e.length&&(c=0),r(e,c,"portfolio-item-active"),r(a,c,"dot-active")},u=(e=2e3)=>{l=setInterval(s,e)};(()=>{for(let o=0;o<e.length;o++){const e=document.createElement("li");e.classList.add("dot"),t.append(e)}a=t.querySelectorAll(".dot")})(),o.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(n(e,c,"portfolio-item-active"),n(a,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&a.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),r(e,c,"portfolio-item-active"),r(a,c,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(1e3)})(),(()=>{const e=document.querySelectorAll(".command .container .row .col-md-4 img"),t=document.querySelectorAll("input"),o=e=>{e.matches(".calc-block input")?e.value=e.value.replace(/\D/g,""):e.matches('[placeholder="Ваше имя"]')?e.value=e.value.replace(/[^а-я ]/gi,""):e.matches('[placeholder="Ваше сообщение"]')?e.value=e.value.replace(/[^а-я\d - .,!?'";: ]/gi,""):e.matches('[placeholder="E-mail"]')||e.matches('[placeholder="Ваш E-mail"]')?e.value=e.value.replace(/[^a-z-@_.!~*']/gi,""):(e.matches('[placeholder="Номер телефона"]')||e.matches('[placeholder="Ваш номер телефона"]'))&&(e.value=e.value.replace(/[^\d\+]/gi,""))};e.forEach((e=>{e.addEventListener("mouseenter",(e=>{e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=e.target.src.replace(/a(?=.jpg)/,"")}))})),t.forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;o(t)})),e.addEventListener("blur",(e=>{const t=e.target;o(t),t.value=t.value.trim(),t.value=t.value.replace(/^-+/g,""),t.value=t.value.replace(/-+$/g,""),t.value=t.value.replace(/-+/g,"-"),t.value=t.value.replace(/ +/g," "),t.matches('[placeholder="Ваше имя"]')&&(t.value=t.value.replace(/( |^)[а-яa-z]+/gi,(e=>e.toLowerCase())),t.value=t.value.replace(/( |^)[а-яa-z]/gi,(e=>e.toUpperCase())))}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),n=document.getElementById("total"),r=document.querySelectorAll(".calc-block input");t.addEventListener("change",(t=>{const r=t.target;(r.matches("select")||r.matches("input"))&&(()=>{let t=0,r=1,s=1;const u=o.options[o.selectedIndex].value,i=+l.value;c.value>1&&(r+=(c.value-1)/10),a.value&&a.value<5?s*=2:a.value&&a.value<10&&(s*=1.5),t=u&&i?e*u*i*r*s:0,n.textContent=Math.ceil(t)})()})),r.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/^[\D]/g,"")}))}))})(100),e(t),e(o),e(l)})();